!function(o,n){var e,t=o.jQuery||o.Cowboy||(o.Cowboy={});t.throttle=e=function(o,e,i,a){var r,s=0;function c(){var t=this,c=+new Date-s,d=arguments;function p(){s=+new Date,i.apply(t,d)}function l(){r=n}a&&!r&&p(),r&&clearTimeout(r),a===n&&c>o?p():!0!==e&&(r=setTimeout(a?l:p,a===n?o-c:o))}return"boolean"!=typeof e&&(a=i,i=e,e=n),t.guid&&(c.guid=i.guid=i.guid||t.guid++),c},t.debounce=function(o,t,i){return i===n?e(o,t,!1):e(o,i,!1!==t)}}(this),$(window).load((function(){setTimeout((function(){$("video").prop("preload","auto").trigger("pause")}),100)})),$((function(){$("body").prepend('<div class="back-holder"><a href="#" class="back">&larr;</a></div>');var o=!1;$(".wrapper, .back-holder").on("click",(function(n){$("body").is(".open-project")&&($("html, body").scrollTop(o),$("body").removeClass("open-project"),$(".project").removeClass("active-project"),document.location.hash="/",$("body").removeClass("play-videos"),$(".project video").trigger("pause"))}));$("a.next").on("click",(function(){$(this).addClass("next-out").one("transitionend webkitTransitionEnd mozTransitionEnd oTransitionEnd",(function(){$(this).removeClass("next-out")})),$(this.href.replace(/^.*#/,"#")).addClass("next-in").one("transitionend webkitTransitionEnd mozTransitionEnd oTransitionEnd",(function(){$(this).removeClass("next-in")})),$("html, body").animate({scrollTop:0},400)})),$('a[href^="#project"]').on("click",(function(n){n.preventDefault(),n.stopPropagation(),$(".project").removeClass("active-project"),$(".active-project video",this.parentNode).each((function(){this.pause()})),function(o){(o.offset().top<$(window).scrollTop()||o.offset().top>$(window).scrollTop()+.6*$(window).height())&&setTimeout((function(){$("html, body").scrollTop(o.offset().top-100)}),1)}($(this.href.replace(/^.*#/,"#")).addClass("active-project")),document.location.hash=this.href.replace(/^.*#/,"/"),$("body").is(".open-project")||(o=$(window).scrollTop()),$("body").addClass("open-project"),$(".wrapper").one("transitionend webkitTransitionEnd mozTransitionEnd oTransitionEnd",(function(){setTimeout((function(){$("body").addClass("play-videos"),$(window).trigger("projectOpened")}),200)}))})),$(".project").on("click",(function(o){$(o.target).is("a")||o.preventDefault(),o.stopPropagation()})),$(window).on("hashchange",(function(){var o=$(document.location.hash.replace(/\//,"")).prev("p").find("a");o.length||(o=$(".back")),o.click()})).trigger("hashchange"),$("video").each((function(){var o=$(this).parent();$('<button class="restart-video">â‡¤</button>').appendTo(o)})),$(".restart-video").on("click",(function(){var o=$("video",this.parentNode);o.get(0).currentTime=0,o.parent().addClass("bounce").one("transitionend webkitTransitionEnd mozTransitionEnd oTransitionEnd",(function(){o.parent().removeClass("bounce")}))}));$(window).on("scroll projectOpened",$.debounce(250,(function(){$("video").each((function(){var o=$(this);o.is(":visible")&&o.parent().parent().height()>10&&(!function(o){return o.offset().top>$(window).scrollTop()-.1*$(window).height()&&o.offset().top<$(window).scrollTop()+.7*$(window).height()}(o)?(o.removeClass("playing"),o.get(0).pause()):(o.addClass("playing"),o.get(0).play()))}))}))).scroll(),/(iPhone|iP[oa]d)/.test(navigator.userAgent)&&$("video").each((function(){$(this).prop("controls",!0).css({width:"100%",height:"10em"})})),WebFont.load({custom:{families:["Volkhov"]},timeout:2e3})}));